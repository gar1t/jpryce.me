!function(t){"use strict";t.fn.lightbox=function(e){var i={margin:50,nav:!0,blur:!0,minSize:0},n={items:[],lightbox:null,content:null,current:null,locked:!1,caption:null,video:null,autoplay:null,init:function(e){n.items=e,n.selector="lightbox-"+Math.random().toString().replace(".",""),n.lightbox||(t("body").append('<div id="lightbox" style="display:none;"><a href="#" class="lightbox-close lightbox-button"></a><div class="lightbox-nav"><a href="#" class="lightbox-previous lightbox-button"></a><a href="#" class="lightbox-next lightbox-button"></a></div><div href="#" class="lightbox-caption"><p></p></div></div>'),n.lightbox=t("#lightbox"),n.caption=t(".lightbox-caption",n.lightbox)),n.items.length>1&&i.nav?t(".lightbox-nav",n.lightbox).show():t(".lightbox-nav",n.lightbox).hide(),n.bindEvents()},loadContent:function(){i.blur&&t("body").addClass("blurred"),t("img",n.lightbox).remove(),t("iframe",n.lightbox).remove(),n.lightbox.fadeIn("fast").append('<span class="lightbox-loading"></span>');var e=t(n.current),o=e.attr("href");if(e.data("video")){var l,r,a,c,d,h;a=e.data("video").split("["),a=a[1],c=a.split(" "),d=c[1].split("]"),l=c[0],r=d[0],h="","1"==e.data("autoplay")&&(-1!=o.indexOf("vimeo")&&(h="&amp;autoplay=1"),-1!=o.indexOf("youtube")&&(h="?autoplay=1")),""==l&&(l="560"),""==r&&(r="315");var s=t('<iframe width="'+l+'px" height="'+r+'px" src="http:'+o+h+'" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>');t(".lightbox-loading").remove(),n.lightbox.append(s),n.content=t("iframe",n.lightbox).hide(),n.resizeContent(),n.setCaption()}else{var u=t('<img src="'+o+'" draggable="false">');t(u).load(function(){t(".lightbox-loading").remove(),n.lightbox.append(u),n.content=t("img",n.lightbox).hide(),n.resizeContent(),n.setCaption()})}},setCaption:function(){var e=t(n.current).data("caption");e&&e.length>0?(n.caption.fadeIn(),t("p",n.caption).text(e)):n.caption.hide()},resizeContent:function(){var e,o,l,r,a;o=t(window).height()-i.margin,l=t(window).outerWidth(!0)-i.margin,n.content.width("").height(""),r=n.content.height(),a=n.content.width(),a>l&&(e=l/a,a=l,r=Math.round(r*e)),r>o&&(e=o/r,r=o,a=Math.round(a*e)),n.content.width(a).height(r).css({top:(t(window).height()-n.content.outerHeight())/2+"px",left:(t(window).width()-n.content.outerWidth())/2+"px"}).show(),n.locked=!1},getCurrentIndex:function(){return t.inArray(n.current,n.items)},next:function(){return n.locked?!1:(n.locked=!0,n.getCurrentIndex()>=n.items.length-1?t(n.items[0]).click():t(n.items[n.getCurrentIndex()+1]).click(),void 0)},previous:function(){return n.locked?!1:(n.locked=!0,n.getCurrentIndex()<=0?t(n.items[n.items.length-1]).click():t(n.items[n.getCurrentIndex()-1]).click(),void 0)},bindEvents:function(){t(n.items).unbind("click").click(function(e){if(!t("#lightbox").is(":visible")&&(t(window).width()<i.minSize||t(window).height()<i.minSize))return t(this).attr("target","_blank"),void 0;var o=t(this)[0];e.preventDefault(),n.current=o,n.loadContent(),t(document).unbind("keydown").on("keydown",function(t){27===t.keyCode&&n.close(),39===t.keyCode&&n.next(),37===t.keyCode&&n.previous()})}),n.lightbox.on("click",function(t){this===t.target&&n.close()}),t(n.lightbox).on("click",".lightbox-previous",function(){return n.previous(),!1}),t(n.lightbox).on("click",".lightbox-next",function(){return n.next(),!1}),t(n.lightbox).on("click",".lightbox-close",function(){return n.close(),!1}),t(window).resize(function(){n.content&&n.resizeContent()})},close:function(){t(document).off("keydown"),t(n.lightbox).fadeOut("fast"),t("iframe",n.lightbox).remove(),t("img",n.lightbox).remove(),t("body").removeClass("blurred")}};t.extend(i,e),n.init(this)}}(jQuery);